import{r as t,c as i,h as e,g as s,a as o}from"./p-e49d35e0.js";function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var n;const a=r((function(t){window,t.exports=function(){return e={},t.m=i=[function(t,i){function e(t,i){i=i||{bubbles:!1,cancelable:!1,detail:void 0};var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),e}var s;i.__esModule=!0,i.hasClassInTree=function(t,i){function e(t,i){return i&&t&&t.classList&&t.classList.contains(i)?t:null}return e(t,i)||function t(i,s){return i&&i!==document?e(i,s)?i:t(i.parentNode,s):null}(t,i)},i.ensureElementInView=function(t,i){var e=t.scrollTop+t.offsetTop,s=e+t.clientHeight,o=i.offsetTop,r=o+i.clientHeight;o<e?t.scrollTop-=e-o:s<r&&(t.scrollTop+=r-s)},i.putContent=function(t,i,e){var s=t.offsetHeight,o=t.getBoundingClientRect();return(e?o.top:o.top-s)<=0?"below":(e?o.bottom:o.bottom+s)>=window.innerHeight?"above":e?i:"below"},i.debounce=function(t,i,e){var s;return void 0===i&&(i=100),void 0===e&&(e=!1),function(){for(var o=[],r=0;r<arguments.length;r++)o[r]=arguments[r];var n=self,a=e&&!s;clearTimeout(s),s=setTimeout((function(){s=null,e||t.apply(n,o)}),i),a&&t.apply(n,o)}},i.isValueInArrayOfObjects=function(t,i,e){if(!Array.isArray(t))return t[i]===e;for(var s=0,o=t;s<o.length;s++){var r=o[s];if(r&&r[i]&&r[i]===e)return!0}return!1},i.highlight=function(t,i,e){var s=t,o=new RegExp("("+i.trim()+")(?![^<]*>[^<>]*</)","i");if(!t.match(o))return t;var r=t.match(o).index,n=r+t.match(o)[0].toString().length,a=t.substring(r,n);return s.replace(o,'<mark class="'+e+'">'+a+"</mark>")},i.kebabCase=function(t){var i=t.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(function(t){return"-"+t.toLowerCase()}));return t[0]===t[0].toUpperCase()?i.substring(1):i},"function"!=typeof(s=window).CustomEvent&&(e.prototype=s.Event.prototype,s.CustomEvent=e)},function(t,i){i.__esModule=!0;var e=(s.prototype.newOption=function(t){return{id:t.id?t.id:String(Math.floor(1e8*Math.random())),value:t.value?t.value:"",text:t.text?t.text:"",innerHTML:t.innerHTML?t.innerHTML:"",selected:!!t.selected&&t.selected,display:void 0===t.display||t.display,disabled:!!t.disabled&&t.disabled,placeholder:!!t.placeholder&&t.placeholder,class:t.class?t.class:void 0,data:t.data?t.data:{},mandatory:!!t.mandatory&&t.mandatory}},s.prototype.add=function(t){this.data.push({id:String(Math.floor(1e8*Math.random())),value:t.value,text:t.text,innerHTML:"",selected:!1,display:!0,disabled:!1,placeholder:!1,class:void 0,mandatory:t.mandatory,data:{}})},s.prototype.parseSelectData=function(){this.data=[];for(var t=0,i=this.main.select.element.childNodes;t<i.length;t++){var e=i[t];if("OPTGROUP"===e.nodeName){for(var s={label:e.label,options:[]},o=0,r=e.childNodes;o<r.length;o++){var n=r[o];if("OPTION"===n.nodeName){var a=this.pullOptionData(n);s.options.push(a),a.placeholder&&""!==a.text.trim()&&(this.main.config.placeholderText=a.text)}}this.data.push(s)}else"OPTION"===e.nodeName&&(a=this.pullOptionData(e),this.data.push(a),a.placeholder&&""!==a.text.trim()&&(this.main.config.placeholderText=a.text))}},s.prototype.pullOptionData=function(t){return{id:!!t.dataset&&t.dataset.id||String(Math.floor(1e8*Math.random())),value:t.value,text:t.text,innerHTML:t.innerHTML,selected:t.selected,disabled:t.disabled,placeholder:"true"===t.dataset.placeholder,class:t.className,style:t.style.cssText,data:t.dataset,mandatory:!!t.dataset&&"true"===t.dataset.mandatory}},s.prototype.setSelectedFromSelect=function(){if(this.main.config.isMultiple){for(var t=[],i=0,e=this.main.select.element.options;i<e.length;i++){var s=e[i];if(s.selected){var o=this.getObjectFromData(s.value,"value");o&&o.id&&t.push(o.id)}}this.setSelected(t,"id")}else{var r=this.main.select.element;-1!==r.selectedIndex&&this.setSelected(r.options[r.selectedIndex].value,"value")}},s.prototype.setSelected=function(t,i){void 0===i&&(i="id");for(var e=0,s=this.data;e<s.length;e++){var o=s[e];if(o.hasOwnProperty("label")){if(o.hasOwnProperty("options")){var r=o.options;if(r)for(var n=0,a=r;n<a.length;n++){var h=a[n];h.placeholder||(h.selected=this.shouldBeSelected(h,t,i))}}}else o.selected=this.shouldBeSelected(o,t,i)}},s.prototype.shouldBeSelected=function(t,i,e){if(void 0===e&&(e="id"),Array.isArray(i))for(var s=0,o=i;s<o.length;s++){var r=o[s];if(e in t&&String(t[e])===String(r))return!0}else if(e in t&&String(t[e])===String(i))return!0;return!1},s.prototype.getSelected=function(){for(var t={text:"",placeholder:this.main.config.placeholderText},i=[],e=0,s=this.data;e<s.length;e++){var o=s[e];if(o.hasOwnProperty("label")){if(o.hasOwnProperty("options")){var r=o.options;if(r)for(var n=0,a=r;n<a.length;n++){var h=a[n];h.selected&&(this.main.config.isMultiple?i.push(h):t=h)}}}else o.selected&&(this.main.config.isMultiple?i.push(o):t=o)}return this.main.config.isMultiple?i:t},s.prototype.addToSelected=function(t,i){if(void 0===i&&(i="id"),this.main.config.isMultiple){var e=[],s=this.getSelected();if(Array.isArray(s))for(var o=0,r=s;o<r.length;o++)e.push(r[o][i]);e.push(t),this.setSelected(e,i)}},s.prototype.removeFromSelected=function(t,i){if(void 0===i&&(i="id"),this.main.config.isMultiple){for(var e=[],s=0,o=this.getSelected();s<o.length;s++){var r=o[s];String(r[i])!==String(t)&&e.push(r[i])}this.setSelected(e,i)}},s.prototype.onDataChange=function(){this.main.onChange&&this.isOnChangeEnabled&&this.main.onChange(JSON.parse(JSON.stringify(this.getSelected())))},s.prototype.getObjectFromData=function(t,i){void 0===i&&(i="id");for(var e=0,s=this.data;e<s.length;e++){var o=s[e];if(i in o&&String(o[i])===String(t))return o;if(o.hasOwnProperty("options")&&o.options)for(var r=0,n=o.options;r<n.length;r++){var a=n[r];if(String(a[i])===String(t))return a}}return null},s.prototype.search=function(t){if(""!==(this.searchValue=t).trim()){var i=this.main.config.searchFilter,e=this.data.slice(0);t=t.trim();var s=e.map((function(e){if(e.hasOwnProperty("options")){var s=e,o=[];if(s.options&&(o=s.options.filter((function(e){return i(e,t)}))),0!==o.length){var r=Object.assign({},s);return r.options=o,r}}return e.hasOwnProperty("text")&&i(e,t)?e:null}));this.filtered=s.filter((function(t){return t}))}else this.filtered=null},s);function s(t){this.contentOpen=!1,this.contentPosition="below",this.isOnChangeEnabled=!0,this.main=t.main,this.searchValue="",this.data=[],this.filtered=null,this.parseSelectData(),this.setSelectedFromSelect()}function o(t){return void 0!==t.text||(console.error("Data object option must have at least have a text value. Check object: "+JSON.stringify(t)),!1)}i.Data=e,i.validateData=function(t){if(!t)return console.error("Data must be an array of objects"),!1;for(var i=0,e=0,s=t;e<s.length;e++){var r=s[e];if(r.hasOwnProperty("label")){if(r.hasOwnProperty("options")){var n=r.options;if(n)for(var a=0,h=n;a<h.length;a++)o(h[a])||i++}}else o(r)||i++}return 0===i},i.validateOption=o},function(t,i,e){i.__esModule=!0;var s=e(3),o=e(4),r=e(5),n=e(1),a=e(0),h=(l.prototype.validate=function(t){var i="string"==typeof t.select?document.querySelector(t.select):t.select;if(!i)throw new Error("Could not find select element");if("SELECT"!==i.tagName)throw new Error("Element isnt of type select");return i},l.prototype.selected=function(){if(this.config.isMultiple){for(var t=[],i=0,e=s=this.data.getSelected();i<e.length;i++)t.push(e[i].value);return t}var s;return(s=this.data.getSelected())?s.value:""},l.prototype.set=function(t,i,e){void 0===i&&(i="value"),void 0===e&&(e=!0),this.config.isMultiple&&!Array.isArray(t)?this.data.addToSelected(t,i):this.data.setSelected(t,i),this.select.setValue(),this.data.onDataChange(),this.render(),e&&this.close()},l.prototype.setSelected=function(t,i,e,s){void 0===i&&(i="value"),void 0===e&&(e=!0),void 0===s&&(s=!0),this.set(t,i,e,s)},l.prototype.setData=function(t){if(n.validateData(t)){for(var i=JSON.parse(JSON.stringify(t)),e=this.data.getSelected(),s=0;s<i.length;s++)i[s].value||i[s].placeholder||(i[s].value=i[s].text);if(this.config.isAjax&&e)if(this.config.isMultiple)for(var o=0,r=e.reverse();o<r.length;o++)i.unshift(r[o]);else{for(i.unshift(e),s=0;s<i.length;s++)i[s].placeholder||i[s].value!==e.value||i[s].text!==e.text||delete i[s];var a=!1;for(s=0;s<i.length;s++)i[s].placeholder&&(a=!0);a||i.unshift({text:"",placeholder:!0})}this.select.create(i),this.data.parseSelectData(),this.data.setSelectedFromSelect()}else console.error("Validation problem on: #"+this.select.element.id)},l.prototype.addData=function(t){n.validateData([t])?(this.data.add(this.data.newOption(t)),this.select.create(this.data.data),this.data.parseSelectData(),this.data.setSelectedFromSelect(),this.render()):console.error("Validation problem on: #"+this.select.element.id)},l.prototype.open=function(){var t=this;if(this.config.isEnabled&&!this.data.contentOpen){if(this.beforeOpen&&this.beforeOpen(),this.config.isMultiple&&this.slim.multiSelected?this.slim.multiSelected.plus.classList.add("ss-cross"):this.slim.singleSelected&&(this.slim.singleSelected.arrowIcon.arrow.classList.remove("arrow-down"),this.slim.singleSelected.arrowIcon.arrow.classList.add("arrow-up")),this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.add("above"===this.data.contentPosition?this.config.openAbove:this.config.openBelow),this.config.addToBody){var i=this.slim.container.getBoundingClientRect();this.slim.content.style.top=i.top+i.height+window.scrollY+"px",this.slim.content.style.left=i.left+window.scrollX+"px",this.slim.content.style.width=i.width+"px"}if(this.slim.content.classList.add(this.config.open),"up"===this.config.showContent.toLowerCase()||"down"!==this.config.showContent.toLowerCase()&&"above"===a.putContent(this.slim.content,this.data.contentPosition,this.data.contentOpen)?this.moveContentAbove():this.moveContentBelow(),!this.config.isMultiple){var e=this.data.getSelected();if(e){var s=this.slim.list.querySelector('[data-id="'+e.id+'"]');s&&a.ensureElementInView(this.slim.list,s)}}setTimeout((function(){t.data.contentOpen=!0,t.config.searchFocus&&t.slim.search.input.focus(),t.afterOpen&&t.afterOpen()}),this.config.timeoutDelay)}},l.prototype.close=function(){var t=this;this.data.contentOpen&&(this.beforeClose&&this.beforeClose(),this.config.isMultiple&&this.slim.multiSelected?(this.slim.multiSelected.container.classList.remove(this.config.openAbove),this.slim.multiSelected.container.classList.remove(this.config.openBelow),this.slim.multiSelected.plus.classList.remove("ss-cross")):this.slim.singleSelected&&(this.slim.singleSelected.container.classList.remove(this.config.openAbove),this.slim.singleSelected.container.classList.remove(this.config.openBelow),this.slim.singleSelected.arrowIcon.arrow.classList.add("arrow-down"),this.slim.singleSelected.arrowIcon.arrow.classList.remove("arrow-up")),this.slim.content.classList.remove(this.config.open),this.data.contentOpen=!1,this.search(""),setTimeout((function(){t.slim.content.removeAttribute("style"),t.data.contentPosition="below",t.config.isMultiple&&t.slim.multiSelected?(t.slim.multiSelected.container.classList.remove(t.config.openAbove),t.slim.multiSelected.container.classList.remove(t.config.openBelow)):t.slim.singleSelected&&(t.slim.singleSelected.container.classList.remove(t.config.openAbove),t.slim.singleSelected.container.classList.remove(t.config.openBelow)),t.slim.search.input.blur(),t.afterClose&&t.afterClose()}),this.config.timeoutDelay))},l.prototype.moveContentAbove=function(){var t=0;this.config.isMultiple&&this.slim.multiSelected?t=this.slim.multiSelected.container.offsetHeight:this.slim.singleSelected&&(t=this.slim.singleSelected.container.offsetHeight);var i=t+this.slim.content.offsetHeight-1;this.slim.content.style.margin="-"+i+"px 0 0 0",this.slim.content.style.height=i-t+1+"px",this.slim.content.style.transformOrigin="center bottom",this.data.contentPosition="above",this.config.isMultiple&&this.slim.multiSelected?(this.slim.multiSelected.container.classList.remove(this.config.openBelow),this.slim.multiSelected.container.classList.add(this.config.openAbove)):this.slim.singleSelected&&(this.slim.singleSelected.container.classList.remove(this.config.openBelow),this.slim.singleSelected.container.classList.add(this.config.openAbove))},l.prototype.moveContentBelow=function(){this.data.contentPosition="below",this.config.isMultiple&&this.slim.multiSelected?(this.slim.multiSelected.container.classList.remove(this.config.openAbove),this.slim.multiSelected.container.classList.add(this.config.openBelow)):this.slim.singleSelected&&(this.slim.singleSelected.container.classList.remove(this.config.openAbove),this.slim.singleSelected.container.classList.add(this.config.openBelow))},l.prototype.enable=function(){this.config.isEnabled=!0,this.config.isMultiple&&this.slim.multiSelected?this.slim.multiSelected.container.classList.remove(this.config.disabled):this.slim.singleSelected&&this.slim.singleSelected.container.classList.remove(this.config.disabled),this.select.triggerMutationObserver=!1,this.select.element.disabled=!1,this.slim.search.input.disabled=!1,this.select.triggerMutationObserver=!0},l.prototype.disable=function(){this.config.isEnabled=!1,this.config.isMultiple&&this.slim.multiSelected?this.slim.multiSelected.container.classList.add(this.config.disabled):this.slim.singleSelected&&this.slim.singleSelected.container.classList.add(this.config.disabled),this.select.triggerMutationObserver=!1,this.select.element.disabled=!0,this.slim.search.input.disabled=!0,this.select.triggerMutationObserver=!0},l.prototype.search=function(t){if(this.data.searchValue!==t)if(this.slim.search.input.value=t,this.config.isAjax){var i=this;this.config.isSearching=!0,this.render(),this.ajax&&this.ajax(t,(function(e){i.config.isSearching=!1,Array.isArray(e)?(e.unshift({text:"",placeholder:!0}),i.setData(e),i.data.search(t),i.render()):"string"==typeof e?i.slim.options(e):i.render()}))}else this.data.search(t),this.render()},l.prototype.setSearchText=function(t){this.config.searchText=t},l.prototype.render=function(){this.config.isMultiple?this.slim.values():(this.slim.placeholder(),this.slim.deselect()),this.slim.options()},l.prototype.destroy=function(t){void 0===t&&(t=null);var i=t?document.querySelector("."+t+".ss-main"):this.slim.container,e=t?document.querySelector("[data-ssid="+t+"]"):this.select.element;if(i&&e&&(document.removeEventListener("click",this.documentClick),"auto"===this.config.showContent&&window.removeEventListener("scroll",this.windowScroll,!1),e.style.display="",delete e.dataset.ssid,e.slim=null,i.parentElement&&i.parentElement.removeChild(i),this.config.addToBody)){var s=t?document.querySelector("."+t+".ss-content"):this.slim.content;if(!s)return;document.body.removeChild(s)}},l);function l(t){var i=this;this.ajax=null,this.addable=null,this.beforeOnChange=null,this.onChange=null,this.beforeOpen=null,this.afterOpen=null,this.beforeClose=null,this.afterClose=null,this.windowScroll=a.debounce((function(){i.data.contentOpen&&("above"===a.putContent(i.slim.content,i.data.contentPosition,i.data.contentOpen)?i.moveContentAbove():i.moveContentBelow())})),this.documentClick=function(t){t.target&&!a.hasClassInTree(t.target,i.config.id)&&i.close()};var e=this.validate(t);e.dataset.ssid&&this.destroy(e.dataset.ssid),t.ajax&&(this.ajax=t.ajax),t.addable&&(this.addable=t.addable),this.config=new s.Config({select:e,isAjax:!!t.ajax,showSearch:t.showSearch,searchPlaceholder:t.searchPlaceholder,searchText:t.searchText,searchingText:t.searchingText,searchFocus:t.searchFocus,searchHighlight:t.searchHighlight,searchFilter:t.searchFilter,closeOnSelect:t.closeOnSelect,showContent:t.showContent,placeholderText:t.placeholder,allowDeselect:t.allowDeselect,allowDeselectOption:t.allowDeselectOption,hideSelectedOption:t.hideSelectedOption,deselectLabel:t.deselectLabel,isEnabled:t.isEnabled,valuesUseText:t.valuesUseText,showOptionTooltips:t.showOptionTooltips,selectByGroup:t.selectByGroup,limit:t.limit,timeoutDelay:t.timeoutDelay,addToBody:t.addToBody}),this.select=new o.Select({select:e,main:this}),this.data=new n.Data({main:this}),this.slim=new r.Slim({main:this}),this.select.element.parentNode&&this.select.element.parentNode.insertBefore(this.slim.container,this.select.element.nextSibling),t.data?this.setData(t.data):this.render(),document.addEventListener("click",this.documentClick),"auto"===this.config.showContent&&window.addEventListener("scroll",this.windowScroll,!1),t.beforeOnChange&&(this.beforeOnChange=t.beforeOnChange),t.onChange&&(this.onChange=t.onChange),t.beforeOpen&&(this.beforeOpen=t.beforeOpen),t.afterOpen&&(this.afterOpen=t.afterOpen),t.beforeClose&&(this.beforeClose=t.beforeClose),t.afterClose&&(this.afterClose=t.afterClose),this.config.isEnabled||this.disable()}i.default=h},function(t,i){i.__esModule=!0;var e=(s.prototype.searchFilter=function(t,i){return-1!==t.text.toLowerCase().indexOf(i.toLowerCase())},s);function s(t){this.id="",this.isMultiple=!1,this.isAjax=!1,this.isSearching=!1,this.showSearch=!0,this.searchFocus=!0,this.searchHighlight=!1,this.closeOnSelect=!0,this.showContent="auto",this.searchPlaceholder="Search",this.searchText="No Results",this.searchingText="Searching...",this.placeholderText="Select Value",this.allowDeselect=!1,this.allowDeselectOption=!1,this.hideSelectedOption=!1,this.deselectLabel="x",this.isEnabled=!0,this.valuesUseText=!1,this.showOptionTooltips=!1,this.selectByGroup=!1,this.limit=0,this.timeoutDelay=200,this.addToBody=!1,this.main="ss-main",this.singleSelected="ss-single-selected",this.arrow="ss-arrow",this.multiSelected="ss-multi-selected",this.add="ss-add",this.plus="ss-plus",this.values="ss-values",this.value="ss-value",this.valueText="ss-value-text",this.valueDelete="ss-value-delete",this.content="ss-content",this.open="ss-open",this.openAbove="ss-open-above",this.openBelow="ss-open-below",this.search="ss-search",this.searchHighlighter="ss-search-highlight",this.addable="ss-addable",this.list="ss-list",this.optgroup="ss-optgroup",this.optgroupLabel="ss-optgroup-label",this.optgroupLabelSelectable="ss-optgroup-label-selectable",this.option="ss-option",this.optionSelected="ss-option-selected",this.highlighted="ss-highlighted",this.disabled="ss-disabled",this.hide="ss-hide",this.id="ss-"+Math.floor(1e5*Math.random()),this.style=t.select.style.cssText,this.class=t.select.className.split(" "),this.isMultiple=t.select.multiple,this.isAjax=t.isAjax,this.showSearch=!1!==t.showSearch,this.searchFocus=!1!==t.searchFocus,this.searchHighlight=!0===t.searchHighlight,this.closeOnSelect=!1!==t.closeOnSelect,t.showContent&&(this.showContent=t.showContent),this.isEnabled=!1!==t.isEnabled,t.searchPlaceholder&&(this.searchPlaceholder=t.searchPlaceholder),t.searchText&&(this.searchText=t.searchText),t.searchingText&&(this.searchingText=t.searchingText),t.placeholderText&&(this.placeholderText=t.placeholderText),this.allowDeselect=!0===t.allowDeselect,this.allowDeselectOption=!0===t.allowDeselectOption,this.hideSelectedOption=!0===t.hideSelectedOption,t.deselectLabel&&(this.deselectLabel=t.deselectLabel),t.valuesUseText&&(this.valuesUseText=t.valuesUseText),t.showOptionTooltips&&(this.showOptionTooltips=t.showOptionTooltips),t.selectByGroup&&(this.selectByGroup=t.selectByGroup),t.limit&&(this.limit=t.limit),t.searchFilter&&(this.searchFilter=t.searchFilter),null!=t.timeoutDelay&&(this.timeoutDelay=t.timeoutDelay),this.addToBody=!0===t.addToBody}i.Config=e},function(t,i,e){i.__esModule=!0;var s=e(0),o=(r.prototype.setValue=function(){if(this.main.data.getSelected()){if(this.main.config.isMultiple)for(var t=this.main.data.getSelected(),i=0,e=this.element.options;i<e.length;i++){var s=e[i];s.selected=!1;for(var o=0,r=t;o<r.length;o++)r[o].value===s.value&&(s.selected=!0)}else t=this.main.data.getSelected(),this.element.value=t?t.value:"";this.main.data.isOnChangeEnabled=!1,this.element.dispatchEvent(new CustomEvent("change",{bubbles:!0})),this.main.data.isOnChangeEnabled=!0}},r.prototype.addAttributes=function(){this.element.tabIndex=-1,this.element.style.display="none",this.element.dataset.ssid=this.main.config.id},r.prototype.addEventListeners=function(){var t=this;this.element.addEventListener("change",(function(){t.main.data.setSelectedFromSelect(),t.main.render()}))},r.prototype.addMutationObserver=function(){var t=this;this.main.config.isAjax||(this.mutationObserver=new MutationObserver((function(i){t.triggerMutationObserver&&(t.main.data.parseSelectData(),t.main.data.setSelectedFromSelect(),t.main.render(),i.forEach((function(i){"class"===i.attributeName&&t.main.slim.updateContainerDivClass(t.main.slim.container)})))})),this.observeMutationObserver())},r.prototype.observeMutationObserver=function(){this.mutationObserver&&this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,characterData:!0})},r.prototype.disconnectMutationObserver=function(){this.mutationObserver&&this.mutationObserver.disconnect()},r.prototype.create=function(t){this.element.innerHTML="";for(var i=0,e=t;i<e.length;i++){var s=e[i];if(s.hasOwnProperty("options")){var o=s,r=document.createElement("optgroup");if(r.label=o.label,o.options)for(var n=0,a=o.options;n<a.length;n++)r.appendChild(this.createOption(a[n]));this.element.appendChild(r)}else this.element.appendChild(this.createOption(s))}},r.prototype.createOption=function(t){var i=document.createElement("option");return i.value=""!==t.value?t.value:t.text,i.innerHTML=t.innerHTML||t.text,t.selected&&(i.selected=t.selected),!1===t.display&&(i.style.display="none"),t.disabled&&(i.disabled=!0),t.placeholder&&i.setAttribute("data-placeholder","true"),t.mandatory&&i.setAttribute("data-mandatory","true"),t.class&&t.class.split(" ").forEach((function(t){i.classList.add(t)})),t.data&&"object"==typeof t.data&&Object.keys(t.data).forEach((function(e){i.setAttribute("data-"+s.kebabCase(e),t.data[e])})),i},r);function r(t){this.triggerMutationObserver=!0,this.element=t.select,this.main=t.main,this.element.disabled&&(this.main.config.isEnabled=!1),this.addAttributes(),this.addEventListeners(),this.mutationObserver=null,this.addMutationObserver(),this.element.slim=t.main}i.Select=o},function(t,i,e){i.__esModule=!0;var s=e(0),o=e(1),r=(n.prototype.containerDiv=function(){var t=document.createElement("div");return t.style.cssText=this.main.config.style,this.updateContainerDivClass(t),t},n.prototype.updateContainerDivClass=function(t){this.main.config.class=this.main.select.element.className.split(" "),t.className="",t.classList.add(this.main.config.id),t.classList.add(this.main.config.main);for(var i=0,e=this.main.config.class;i<e.length;i++){var s=e[i];""!==s.trim()&&t.classList.add(s)}},n.prototype.singleSelectedDiv=function(){var t=this,i=document.createElement("div");i.classList.add(this.main.config.singleSelected);var e=document.createElement("span");e.classList.add("placeholder"),i.appendChild(e);var s=document.createElement("span");s.innerHTML=this.main.config.deselectLabel,s.classList.add("ss-deselect"),s.onclick=function(i){i.stopPropagation(),t.main.config.isEnabled&&t.main.set("")},i.appendChild(s);var o=document.createElement("span");o.classList.add(this.main.config.arrow);var r=document.createElement("span");return r.classList.add("arrow-down"),o.appendChild(r),i.appendChild(o),i.onclick=function(){t.main.config.isEnabled&&(t.main.data.contentOpen?t.main.close():t.main.open())},{container:i,placeholder:e,deselect:s,arrowIcon:{container:o,arrow:r}}},n.prototype.placeholder=function(){var t=this.main.data.getSelected();if(null===t||t&&t.placeholder){var i=document.createElement("span");i.classList.add(this.main.config.disabled),i.innerHTML=this.main.config.placeholderText,this.singleSelected&&(this.singleSelected.placeholder.innerHTML=i.outerHTML)}else{var e="";t&&(e=t.innerHTML&&!0!==this.main.config.valuesUseText?t.innerHTML:t.text),this.singleSelected&&(this.singleSelected.placeholder.innerHTML=t?e:"")}},n.prototype.deselect=function(){if(this.singleSelected){if(!this.main.config.allowDeselect)return void this.singleSelected.deselect.classList.add("ss-hide");""===this.main.selected()?this.singleSelected.deselect.classList.add("ss-hide"):this.singleSelected.deselect.classList.remove("ss-hide")}},n.prototype.multiSelectedDiv=function(){var t=this,i=document.createElement("div");i.classList.add(this.main.config.multiSelected);var e=document.createElement("div");e.classList.add(this.main.config.values),i.appendChild(e);var s=document.createElement("div");s.classList.add(this.main.config.add);var o=document.createElement("span");return o.classList.add(this.main.config.plus),o.onclick=function(i){t.main.data.contentOpen&&(t.main.close(),i.stopPropagation())},s.appendChild(o),i.appendChild(s),i.onclick=function(i){t.main.config.isEnabled&&(i.target.classList.contains(t.main.config.valueDelete)||(t.main.data.contentOpen?t.main.close():t.main.open()))},{container:i,values:e,add:s,plus:o}},n.prototype.values=function(){if(this.multiSelected){for(var t,i=this.multiSelected.values.childNodes,e=this.main.data.getSelected(),s=[],o=0,r=i;o<r.length;o++){var n=r[o];t=!0;for(var a=0,h=e;a<h.length;a++){var l=h[a];String(l.id)===String(n.dataset.id)&&(t=!1)}t&&s.push(n)}for(var c=0,u=s;c<u.length;c++){var d=u[c];d.classList.add("ss-out"),this.multiSelected.values.removeChild(d)}for(i=this.multiSelected.values.childNodes,l=0;l<e.length;l++){t=!1;for(var p=0,f=i;p<f.length;p++)n=f[p],String(e[l].id)===String(n.dataset.id)&&(t=!0);t||(0!==i.length&&HTMLElement.prototype.insertAdjacentElement?0===l?this.multiSelected.values.insertBefore(this.valueDiv(e[l]),i[l]):i[l-1].insertAdjacentElement("afterend",this.valueDiv(e[l])):this.multiSelected.values.appendChild(this.valueDiv(e[l])))}if(0===e.length){var b=document.createElement("span");b.classList.add(this.main.config.disabled),b.innerHTML=this.main.config.placeholderText,this.multiSelected.values.innerHTML=b.outerHTML}}},n.prototype.valueDiv=function(t){var i=this,e=document.createElement("div");e.classList.add(this.main.config.value),e.dataset.id=t.id;var s=document.createElement("span");if(s.classList.add(this.main.config.valueText),s.innerHTML=t.innerHTML&&!0!==this.main.config.valuesUseText?t.innerHTML:t.text,e.appendChild(s),!t.mandatory){var o=document.createElement("span");o.classList.add(this.main.config.valueDelete),o.innerHTML=this.main.config.deselectLabel,o.onclick=function(e){e.preventDefault(),e.stopPropagation();var s=!1;if(i.main.beforeOnChange||(s=!0),i.main.beforeOnChange){for(var o=i.main.data.getSelected(),r=JSON.parse(JSON.stringify(o)),n=0;n<r.length;n++)r[n].id===t.id&&r.splice(n,1);!1!==i.main.beforeOnChange(r)&&(s=!0)}s&&(i.main.data.removeFromSelected(t.id,"id"),i.main.render(),i.main.select.setValue(),i.main.data.onDataChange())},e.appendChild(o)}return e},n.prototype.contentDiv=function(){var t=document.createElement("div");return t.classList.add(this.main.config.content),t},n.prototype.searchDiv=function(){var t=this,i=document.createElement("div"),e=document.createElement("input"),s=document.createElement("div");i.classList.add(this.main.config.search);var r={container:i,input:e};return this.main.config.showSearch||(i.classList.add(this.main.config.hide),e.readOnly=!0),e.type="search",e.placeholder=this.main.config.searchPlaceholder,e.tabIndex=0,e.setAttribute("aria-label",this.main.config.searchPlaceholder),e.setAttribute("autocapitalize","off"),e.setAttribute("autocomplete","off"),e.setAttribute("autocorrect","off"),e.onclick=function(i){setTimeout((function(){""===i.target.value&&t.main.search("")}),10)},e.onkeydown=function(i){"ArrowUp"===i.key?(t.main.open(),t.highlightUp(),i.preventDefault()):"ArrowDown"===i.key?(t.main.open(),t.highlightDown(),i.preventDefault()):"Tab"===i.key?t.main.data.contentOpen?t.main.close():setTimeout((function(){t.main.close()}),t.main.config.timeoutDelay):"Enter"===i.key&&i.preventDefault()},e.onkeyup=function(i){var o=i.target;if("Enter"===i.key){if(t.main.addable&&i.ctrlKey)return s.click(),i.preventDefault(),void i.stopPropagation();var r=t.list.querySelector("."+t.main.config.highlighted);r&&r.click()}else"ArrowUp"===i.key||"ArrowDown"===i.key||("Escape"===i.key?t.main.close():t.main.config.showSearch&&t.main.data.contentOpen?t.main.search(o.value):e.value="");i.preventDefault(),i.stopPropagation()},e.onfocus=function(){t.main.open()},i.appendChild(e),this.main.addable&&(s.classList.add(this.main.config.addable),s.innerHTML="+",s.onclick=function(i){if(t.main.addable){i.preventDefault(),i.stopPropagation();var e=t.search.input.value;if(""===e.trim())return void t.search.input.focus();var s=t.main.addable(e),r="";if(!s)return;"object"==typeof s?o.validateOption(s)&&(t.main.addData(s),r=s.value?s.value:s.text):(t.main.addData(t.main.data.newOption({text:s,value:s})),r=s),t.main.search(""),setTimeout((function(){t.main.set(r,"value",!1,!1)}),100),t.main.config.closeOnSelect&&setTimeout((function(){t.main.close()}),100)}},i.appendChild(s),r.addable=s),r},n.prototype.highlightUp=function(){var t=this.list.querySelector("."+this.main.config.highlighted),i=null;if(t)for(i=t.previousSibling;null!==i&&i.classList.contains(this.main.config.disabled);)i=i.previousSibling;else{var e=this.list.querySelectorAll("."+this.main.config.option+":not(."+this.main.config.disabled+")");i=e[e.length-1]}if(i&&i.classList.contains(this.main.config.optgroupLabel)&&(i=null),null===i){var o=t.parentNode;if(o.classList.contains(this.main.config.optgroup)&&o.previousSibling){var r=o.previousSibling.querySelectorAll("."+this.main.config.option+":not(."+this.main.config.disabled+")");r.length&&(i=r[r.length-1])}}i&&(t&&t.classList.remove(this.main.config.highlighted),i.classList.add(this.main.config.highlighted),s.ensureElementInView(this.list,i))},n.prototype.highlightDown=function(){var t=this.list.querySelector("."+this.main.config.highlighted),i=null;if(t)for(i=t.nextSibling;null!==i&&i.classList.contains(this.main.config.disabled);)i=i.nextSibling;else i=this.list.querySelector("."+this.main.config.option+":not(."+this.main.config.disabled+")");if(null===i&&null!==t){var e=t.parentNode;e.classList.contains(this.main.config.optgroup)&&e.nextSibling&&(i=e.nextSibling.querySelector("."+this.main.config.option+":not(."+this.main.config.disabled+")"))}i&&(t&&t.classList.remove(this.main.config.highlighted),i.classList.add(this.main.config.highlighted),s.ensureElementInView(this.list,i))},n.prototype.listDiv=function(){var t=document.createElement("div");return t.classList.add(this.main.config.list),t},n.prototype.options=function(t){void 0===t&&(t="");var i,e=this.main.data.filtered||this.main.data.data;if((this.list.innerHTML="")!==t)return(i=document.createElement("div")).classList.add(this.main.config.option),i.classList.add(this.main.config.disabled),i.innerHTML=t,void this.list.appendChild(i);if(this.main.config.isAjax&&this.main.config.isSearching)return(i=document.createElement("div")).classList.add(this.main.config.option),i.classList.add(this.main.config.disabled),i.innerHTML=this.main.config.searchingText,void this.list.appendChild(i);if(0===e.length){var s=document.createElement("div");return s.classList.add(this.main.config.option),s.classList.add(this.main.config.disabled),s.innerHTML=this.main.config.searchText,void this.list.appendChild(s)}for(var o=function(t){if(t.hasOwnProperty("label")){var i=t,e=document.createElement("div");e.classList.add(r.main.config.optgroup);var s=document.createElement("div");s.classList.add(r.main.config.optgroupLabel),r.main.config.selectByGroup&&r.main.config.isMultiple&&s.classList.add(r.main.config.optgroupLabelSelectable),s.innerHTML=i.label,e.appendChild(s);var o=i.options;if(o){for(var n=0,a=o;n<a.length;n++)e.appendChild(r.option(a[n]));if(r.main.config.selectByGroup&&r.main.config.isMultiple){var h=r;s.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();for(var i=0,s=e.children;i<s.length;i++){var o=s[i];-1!==o.className.indexOf(h.main.config.option)&&o.click()}}))}}r.list.appendChild(e)}else r.list.appendChild(r.option(t))},r=this,n=0,a=e;n<a.length;n++)o(a[n])},n.prototype.option=function(t){if(t.placeholder){var i=document.createElement("div");return i.classList.add(this.main.config.option),i.classList.add(this.main.config.hide),i}var e=document.createElement("div");e.classList.add(this.main.config.option),t.class&&t.class.split(" ").forEach((function(t){e.classList.add(t)})),t.style&&(e.style.cssText=t.style);var o=this.main.data.getSelected();e.dataset.id=t.id,this.main.config.searchHighlight&&this.main.slim&&t.innerHTML&&""!==this.main.slim.search.input.value.trim()?e.innerHTML=s.highlight(t.innerHTML,this.main.slim.search.input.value,this.main.config.searchHighlighter):t.innerHTML&&(e.innerHTML=t.innerHTML),this.main.config.showOptionTooltips&&e.textContent&&e.setAttribute("title",e.textContent);var r=this;e.addEventListener("click",(function(i){i.preventDefault(),i.stopPropagation();var e=this.dataset.id;if(!0===t.selected&&r.main.config.allowDeselectOption){var s=!1;if(r.main.beforeOnChange&&r.main.config.isMultiple||(s=!0),r.main.beforeOnChange&&r.main.config.isMultiple){for(var n=r.main.data.getSelected(),a=JSON.parse(JSON.stringify(n)),h=0;h<a.length;h++)a[h].id===e&&a.splice(h,1);!1!==r.main.beforeOnChange(a)&&(s=!0)}s&&(r.main.config.isMultiple?(r.main.data.removeFromSelected(e,"id"),r.main.render(),r.main.select.setValue(),r.main.data.onDataChange()):r.main.set(""))}else{if(t.disabled||t.selected)return;if(r.main.config.limit&&Array.isArray(o)&&r.main.config.limit<=o.length)return;if(r.main.beforeOnChange){var l=void 0,c=JSON.parse(JSON.stringify(r.main.data.getObjectFromData(e)));c.selected=!0,r.main.config.isMultiple?(l=JSON.parse(JSON.stringify(o))).push(c):l=JSON.parse(JSON.stringify(c)),!1!==r.main.beforeOnChange(l)&&r.main.set(e,"id",r.main.config.closeOnSelect)}else r.main.set(e,"id",r.main.config.closeOnSelect)}}));var n=o&&s.isValueInArrayOfObjects(o,"id",t.id);return(t.disabled||n)&&(e.onclick=null,r.main.config.allowDeselectOption||e.classList.add(this.main.config.disabled),r.main.config.hideSelectedOption&&e.classList.add(this.main.config.hide)),n?e.classList.add(this.main.config.optionSelected):e.classList.remove(this.main.config.optionSelected),e},n);function n(t){this.main=t.main,this.container=this.containerDiv(),this.content=this.contentDiv(),this.search=this.searchDiv(),this.list=this.listDiv(),this.options(),this.singleSelected=null,this.multiSelected=null,this.main.config.isMultiple?(this.multiSelected=this.multiSelectedDiv(),this.multiSelected&&this.container.appendChild(this.multiSelected.container)):(this.singleSelected=this.singleSelectedDiv(),this.container.appendChild(this.singleSelected.container)),this.main.config.addToBody?(this.content.classList.add(this.main.config.id),document.body.appendChild(this.content)):this.container.appendChild(this.content),this.content.appendChild(this.search.container),this.content.appendChild(this.list)}i.Slim=r}],t.c=e,t.d=function(i,e,s){t.o(i,e)||Object.defineProperty(i,e,{enumerable:!0,get:s})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(i,e){if(1&e&&(i=t(i)),8&e)return i;if(4&e&&"object"==typeof i&&i&&i.__esModule)return i;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:i}),2&e&&"string"!=typeof i)for(var o in i)t.d(s,o,function(t){return i[t]}.bind(null,o));return s},t.n=function(i){var e=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(e,"a",e),e},t.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},t.p="",t(t.s=2).default;function t(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return i[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i,e}()}(n={path:undefined,exports:{},require:function(){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),n.exports));let h;const l=class{constructor(e){t(this,e),this.backgroundToggle=i(this,"backgroundToggle",7),this.mymap=[],this.clearMessages=()=>{this.showSuccess="",this.showLoginError=""},this.login=async()=>{let t=await fetch(this.dataCoreUrl+"customer/PortaSession/Create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({login:this.loginInput,password:this.passwordInput})}),i=await t.json();""!=i.session_id&&null!=i.session_id?(this.loggedIn=!0,this.showLoginError=null):this.showLoginError="Something went wrong when logging in"},this.adminLogin=async()=>{let t=await fetch(this.dataCoreUrl+"admin/PortaSession/Create",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({login:this.dataAdminUser,token:this.dataAdminToken})}),i=await t.json();return""!=i.session_id&&null!=i.session_id?(this.adminSessionToken=i.session_id,this.showLoginError=null,!0):(this.showLoginError="Something went wrong when authorising",!1)},this.getICustomer=async()=>{let t=await fetch(this.dataCoreUrl+"customer/TeamsAutomation/GetTeamsDomain",{method:"GET",headers:{"X-Session-Token":this.dataSessionId}}),i=await t.json();console.log(i),this.i_customer=i.teamsDomain},this.updateLogin=async()=>{var t=this.el.shadowRoot.querySelectorAll(".step");Array.prototype.forEach.call(t,(function(t){t.classList.add("opacity-50")}));var i=this.el.shadowRoot.querySelectorAll(".step-selector");Array.prototype.forEach.call(i,(function(t){t.setAttribute("disabled","true"),t.removeAttribute("checked")})),this.el.shadowRoot.getElementById("txt-input-group").style.display="block",this.el.shadowRoot.getElementById("txt-input-group").parentNode.parentNode.classList.add("w-1/3"),this.el.shadowRoot.getElementById("txt-submitted").style.display="none",this.el.shadowRoot.getElementById("e3-user-instructions").style.display="none",this.el.shadowRoot.getElementById("e3-user-instructions").style.display="none",this.el.shadowRoot.getElementById("ump-tech-wait").style.display="none",this.el.shadowRoot.getElementById("e3-waiting").style.display="none",this.el.shadowRoot.getElementById("e3-auth").style.display="none";let e=await fetch(this.dataCoreUrl+"customer/TeamsAutomation/GetCurrentState/"+this.dataInstallationId+"/"+(this.dataAdminToken?this.selectedCustomer:null),{method:"GET",headers:{"X-Session-Token":this.adminSessionToken?this.adminSessionToken:this.dataAdminToken,"X-Porta-Url":this.dataPortaUrl?this.dataPortaUrl:""}});var s=(r=await e.json()).stepNumber;this.teamsDomain=r.teamsDomain;var o=Number(s);switch(console.log(r),o){case 0:this.el.shadowRoot.getElementById("step-1-selector").removeAttribute("disabled"),this.el.shadowRoot.getElementById("step-1").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("step-1-selector").checked=!0;break;case 1:h=r.configuration,this.txtSubmissionDate=r.configuration.dateAdded,this.txtRecord=r.configuration.txt,"pending"==h.status?(this.el.shadowRoot.getElementById("txt-input-group").style.display="none",this.el.shadowRoot.getElementById("txt-input-group").parentNode.parentNode.classList.remove("w-1/3"),this.el.shadowRoot.getElementById("txt-submitted").style.display="flex",this.el.shadowRoot.getElementById("step-1-selector").removeAttribute("disabled"),this.el.shadowRoot.getElementById("step-1").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("step-1-selector").checked=!0):"completed"==h.status&&(this.el.shadowRoot.getElementById("step-2-selector").removeAttribute("disabled"),this.el.shadowRoot.getElementById("step-2").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("step-2-selector").checked=!0);break;case 2:this.el.shadowRoot.getElementById("step-3-selector").removeAttribute("disabled"),this.el.shadowRoot.getElementById("step-3").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("e3-user-instructions").style.display="block",this.el.shadowRoot.getElementById("step-3-selector").checked=!0;break;case 3:if("ready_for_auth"===r.configuration.status)this.e3AuthDomain=r.configuration.domain,this.el.shadowRoot.getElementById("e3-auth").style.display="block";else if("pending"===r.configuration.status)this.el.shadowRoot.getElementById("e3-waiting").style.display="flex";else if("ump_auth_complete"===r.configuration.status)this.el.shadowRoot.getElementById("ump-tech-wait").style.display="flex";else{if("completed"===r.configuration.status){let t=await fetch(this.dataCoreUrl+"customer/PortaAccounts/List",{method:"POST",headers:{"X-Session-Token":this.dataSessionId,"X-Porta-Url":this.dataPortaUrl?this.dataPortaUrl:"","Content-Type":"application/json"},body:JSON.stringify({})});var r=await t.json();this.mymap=r.account_list,this.el.shadowRoot.getElementById("step-4-selector").removeAttribute("disabled"),this.el.shadowRoot.getElementById("step-4").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("step-4-selector").checked=!0;break}this.el.shadowRoot.getElementById("e3-user-instructions").style.display="block"}this.el.shadowRoot.getElementById("step-3-selector").removeAttribute("disabled"),this.el.shadowRoot.getElementById("step-3").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("step-3-selector").checked=!0}},this.domainVerified=async()=>{this.clearMessages();let t=await fetch(this.dataCoreUrl+"customer/TeamsAutomation/InsertStepRequest",{method:"POST",headers:{"X-Session-Token":this.adminSessionToken?this.adminSessionToken:this.dataAdminToken,"Content-Type":"application/json"},body:JSON.stringify({StepId:2,Configuration:{status:"completed"},InstallationId:this.dataInstallationId,ICustomer:this.dataAdminToken?this.selectedCustomer:null})});await t.json(),this.el.shadowRoot.getElementById("step-2-selector").setAttribute("disabled",!0),this.el.shadowRoot.getElementById("step-2").classList.add("opacity-50"),this.el.shadowRoot.getElementById("step-3").classList.remove("opacity-50"),this.el.shadowRoot.getElementById("step-3-selector").checked=!0,this.el.shadowRoot.getElementById("e3-user-instructions").style.display="block"},this.createdUser=async()=>{this.el.shadowRoot.getElementById("ump-progress").setAttribute("disabled","disabled"),this.clearMessages();let t=await fetch(this.dataCoreUrl+"customer/TeamsAutomation/MoveToUMP/"+this.dataInstallationId+"/"+(this.dataAdminToken?this.selectedCustomer:null),{method:"GET",headers:{"X-Session-Token":this.adminSessionToken?this.adminSessionToken:this.dataAdminToken,"X-Porta-Url":this.dataPortaUrl?this.dataPortaUrl:""}});(await t.json()).success?(this.el.shadowRoot.getElementById("e3-user-instructions").style.display="none",this.el.shadowRoot.getElementById("e3-waiting").style.display="flex"):(this.showLoginError="Something went wrong when marking your E3 user as created, please try again",this.el.shadowRoot.getElementById("ump-progress").removeAttribute("disabled"))},this.submitTxtRecord=async()=>{this.clearMessages();let t=await fetch(this.dataCoreUrl+"customer/TeamsAutomation/SubmitTxtRecord",{method:"POST",headers:{"X-Session-Token":this.adminSessionToken?this.adminSessionToken:this.dataAdminToken,"Content-Type":"application/json"},body:JSON.stringify({installationId:this.dataInstallationId,txtRecord:this.txtRecordInput,iCustomer:this.dataAdminToken?this.selectedCustomer:null})});(await t.json()).success?(this.el.shadowRoot.getElementById("txt-record-input").value="",this.showSuccess="Your record has been submitted. This can take 24 hours to complete"):this.showLoginError="Something went wrong while submitting your record. Please try again"},this.umpAuthComplete=async()=>{this.clearMessages();let t=await fetch(this.dataCoreUrl+"customer/TeamsAutomation/CompleteUmpAuth/"+this.dataInstallationId+"/"+(this.dataAdminToken?this.selectedCustomer:null),{method:"GET",headers:{"X-Session-Token":this.adminSessionToken?this.adminSessionToken:this.dataAdminToken,"X-Porta-Url":this.dataPortaUrl?this.dataPortaUrl:""}});(await t).ok?(this.el.shadowRoot.getElementById("e3-auth").style.display="none",this.el.shadowRoot.getElementById("ump-tech-wait").style.display="flex"):this.showLoginError="Something went wrong"}}componentWillLoad(){""!==this.dataSessionId&&void 0!==this.dataSessionId&&(console.log("setting loggedIn to true ",this.dataSessionId),this.loggedIn=!0,this.updateLogin())}componentDidUpdate(){if(this.loggedIn)return!0}async componentDidLoad(){if(this.dataAdminToken&&await this.adminLogin()){let i=await fetch(this.dataCoreUrl+"admin/PortaCustomers/List",{method:"POST",headers:{"X-Session-Token":this.adminSessionToken,"X-Porta-Url":this.dataPortaUrl?this.dataPortaUrl:"","Content-Type":"application/json"},body:JSON.stringify({})});var t=await i.json();let e=[];e=await t.customer_list.reduce((function(i,e){if(console.log(!e.i_parent),1!==e.i_customer_type||e.i_parent){if(1===e.i_customer_type&&e.i_parent){console.log(e);var s=t.customer_list.find((t=>t.i_customer==e.i_parent)).name.toUpperCase()+" - "+e.name;i.push({text:s,value:e.i_customer,data:e})}}else i.push({text:"DIRECT - "+e.name,value:e.i_customer,data:e});return i}),[]),new a({select:this.el.shadowRoot.getElementById("single"),searchHighlight:!0,data:e,placeholder:"Please select a customer",onChange:t=>{this.selectedCustomer=t.value,this.updateLogin()}})}}render(){return e("div",{class:"w-full mx-auto p-8"},e("style",{scoped:!0},"@import url(",s("assets/accordion.css"),"); @import url(",s("assets/slimselect.css"),");","@import url(",s("assets/tailwind.css"),");"),this.showLoginError&&e("p",{style:{color:"red"}},this.showLoginError),this.showSuccess&&e("p",{style:{color:"green"}},this.showSuccess),this.dataAdminToken&&e("div",null,e("p",{style:{color:"green"}},"Admin modde"),e("select",{id:"single",class:"w-1/3"})),this.loggedIn||this.dataAdminToken?e("div",null,e("div",{class:"w-full mx-auto p-8"},e("div",{class:"shadow-md"},e("div",{class:"tab w-full overflow-hidden border-t opacity-50 step",id:"step-1"},e("input",{class:"absolute opacity-0 step-selector",id:"step-1-selector",disabled:!0,type:"radio",name:"tabs2"}),e("label",{class:"block p-5 leading-normal cursor-pointer",htmlFor:"step-1-selector"},"Domain Configuration"),e("div",{class:"tab-content overflow-hidden border-l-2 bg-gray-200 border-indigo-500 leading-normal"},e("p",{class:"p-5"},"Here you need to configure the domain, the domain to use is ",e("code",{class:"text-red-600"},this.teamsDomain),". In Office365 please add a new domain. You will be provided with a TXT record, please enter it below and then press Submit"),e("hr",null),e("div",{class:"w-1/3 flex flex-col justify-center"},e("div",{class:"mt-1 relative rounded-md shadow-sm pl-4"},e("div",{id:"txt-input-group"},e("input",{type:"text",name:"txt-record",class:"h-10 focus:outline-none block w-full pl-2 pr-12 sm:text-sm border-gray-300 rounded-md",placeholder:"TXT-12345",id:"txt-record-input",onChange:t=>{this.txtRecordInput=t.target.value}}),e("div",{class:"absolute inset-y-0 right-0"},e("button",{class:"btn-success",id:"txt-record-submit",onClick:()=>{this.submitTxtRecord()}},"Submit"))),e("div",{class:"w-9/12 py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7 flex justify-center",style:{display:"none"},id:"txt-submitted"},e("div",{class:"alert-info"},e("span",{class:"inline-block align-middle mr-8"},"You submitted your TXT already on ",this.txtSubmissionDate,e("br",null),"Your Record: ",this.txtRecord))))),e("br",null))),e("div",{class:"tab w-full overflow-hidden border-t opacity-50 step",id:"step-2"},e("input",{class:"absolute opacity-0 step-selector",id:"step-2-selector",disabled:!0,type:"radio",name:"tabs2"}),e("label",{class:"block p-5 leading-normal cursor-pointer",htmlFor:"step-2-selector"},"Verifying Domain"),e("div",{class:"tab-content overflow-hidden border-l-2 bg-gray-200 border-indigo-500 leading-normal"},e("p",{class:"pt-5 px-5 pb-2"},"The support team has now marked your domain as ready for verification. To do this, please perform the following steps in Office365"),e("ol",{class:"list-decimal pl-10 pt-3"},e("li",null,"Login to login.microsoft.com"),e("li",null,"Go to Teams Configuration Page"),e("li",null,'Press "Check Status"'),e("li",null,"Press complete below")),e("button",{class:"pl-5 btn-success h-10",type:"button",onClick:()=>{this.domainVerified()}},"Complete"))),e("div",{class:"tab w-full overflow-hidden border-t opacity-50 step",id:"step-3"},e("input",{class:"absolute opacity-0 step-selector",id:"step-3-selector",disabled:!0,type:"radio",name:"tabs2"}),e("label",{class:"block p-5 leading-normal cursor-pointer",htmlFor:"step-3-selector"},"Creating an E3 User"),e("div",{class:"tab-content overflow-hidden border-l-2 bg-gray-200 border-indigo-500 leading-normal flex flex-col justify-center"},e("div",{id:"e3-user-instructions",class:"pt-5 px-5 pb-2",style:{display:"none"}},"You now need to create an E3 user within Office365. This can be done by following the steps below:",e("br",null),e("ol",{class:"list-decimal pl-10 pt-3"},e("li",null,"Go to office.com"),e("li",null,"Click here"),e("li",null,"Click there"),e("li",null,"Create a user")),e("button",{class:"btn-success h-10",type:"button",id:"ump-progress",onClick:()=>{this.createdUser()}},"Complete")),e("div",{id:"e3-waiting",class:"flex justify-center",style:{display:"none"}},e("div",{class:"w-9/12 py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7"},e("div",{class:"alert-info"},e("span",{class:"inline-block align-middle mr-8"},"Waiting for technical team to progress your configuration, please check back shortly. This can take up to 24 hours")))),e("div",{id:"e3-auth",class:"p-5",style:{display:"none"}},e("div",{class:"flex justify-center"},e("div",{class:"alert-info w-9/12 "},"You now need to authorise your Office365 tenant with UMP. This can be done by clicking here:",e("br",null),e("br",null),e("a",{class:"px-5 py-2 m-2 text-green-100 transition-colors duration-150 bg-green-600 hover:bg-green-700",href:this.e3AuthDomain,target:"_blank"},"Start Authentication"),e("br",null),e("br",null),"Please only press continue below when you've successfully authenticated. If you need assistance please contact support")),e("div",null,e("button",{type:"button",class:"btn-info h-10",onClick:this.umpAuthComplete},"Continue"))),e("div",{id:"ump-tech-wait",class:"flex justify-center",style:{display:"none"}},e("div",{class:"w-9/12 py-8 text-base leading-6 space-y-4 text-gray-700 sm:text-lg sm:leading-7"},e("div",{class:"alert-info"},e("span",{class:"inline-block align-middle mr-8"},"The technical team will now finish your UMP/Office365 configuration. This can take up to 24 hours")))))),e("div",{class:"tab w-full overflow-hidden border-t opacity-50 step",id:"step-4"},e("input",{class:"absolute opacity-0 step-selector",id:"step-4-selector",disabled:!0,type:"radio",name:"tabs2"}),e("label",{class:"block p-5 leading-normal cursor-pointer",htmlFor:"step-2-selector"},"Account Setup"),e("div",{class:"tab-content overflow-hidden border-l-2 bg-gray-200 border-indigo-500 leading-normal"},"Below you can manually attach accounts to Teams, alternatively, you can use the scripts below",e("table",{class:"table-auto w-full text-left"},e("thead",null,e("tr",null,e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Id"),e("th",{scope:"col"},"First Name"),e("th",{scope:"col"},"Last Name"),e("th",{scope:"col"},"Email"),e("th",{scope:"col"},"Actions"))),e("tbody",null,this.mymap.map((t=>{if(!t.id.includes("-old")&&t.email)return e("tr",null,e("th",{scope:"row"},t.i_account),e("td",null,t.id),e("td",null,t.firstname),e("td",null,t.lastname),e("td",null,t.email),e("td",null,e("button",{class:"h-8 px-5 m-2 text-green-100 transition-colors duration-150 bg-green-700 hover:bg-green-800"},e("svg",{class:"h-6 w-6  text-white-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})))))}))))))))):e("form",{class:"form-signin"},e("input",{type:"text",class:"form-control",name:"username",placeholder:"Email Address",required:!0,autoFocus:!0,onChange:t=>{this.loginInput=t.target.value}}),e("input",{type:"password",class:"form-control",name:"password",placeholder:"Password",required:!0,onChange:t=>{this.passwordInput=t.target.value}}),e("button",{class:"btn btn-lg btn-primary btn-block",type:"button",onClick:()=>{this.login()}},"Login")))}static get assetsDirs(){return["./assets"]}get el(){return o(this)}};l.style="/*! tailwindcss v2.0.4 | MIT License | https://tailwindcss.com*//*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}:host{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji}code{font-family:ui-monospace,SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}table{text-indent:0;border-color:inherit}button,input,select{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],button{-webkit-appearance:button}progress{vertical-align:baseline}p{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}ol{list-style:none;margin:0;padding:0}:host{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}body{font-family:inherit;line-height:inherit}*,:after,:before{box-sizing:border-box;border:0 solid #e5e7eb}input::-moz-placeholder{opacity:1;color:#9ca3af}input:-ms-input-placeholder{opacity:1;color:#9ca3af}input::placeholder{opacity:1;color:#9ca3af}button{cursor:pointer}table{border-collapse:collapse}a{color:inherit;text-decoration:inherit}button,input,select{padding:0;line-height:inherit;color:inherit}code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}svg{display:block;vertical-align:middle}.btn-blue{--tw-bg-opacity:1;background-color:rgba(59,130,246,var(--tw-bg-opacity))}.btn-blue:hover{--tw-bg-opacity:1;background-color:rgba(29,78,216,var(--tw-bg-opacity))}.btn-blue{border-radius:.5rem;font-weight:600}.btn-blue:focus{outline:2px solid transparent;outline-offset:2px}.btn-blue{padding:.5rem 1rem;--tw-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06);box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.btn-blue:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent);--tw-ring-opacity:1;--tw-ring-color:rgba(96,165,250,var(--tw-ring-opacity));--tw-ring-opacity:0.75}.btn-blue{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.btn-success{--tw-bg-opacity:1;background-color:rgba(4,120,87,var(--tw-bg-opacity))}.btn-success:hover{--tw-bg-opacity:1;background-color:rgba(6,95,70,var(--tw-bg-opacity))}.btn-success{margin:.5rem;padding-left:1.25rem;padding-right:1.25rem;--tw-text-opacity:1;color:rgba(209,250,229,var(--tw-text-opacity));transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.btn-info{--tw-bg-opacity:1;background-color:rgba(59,130,246,var(--tw-bg-opacity))}.btn-info:hover{--tw-bg-opacity:1;background-color:rgba(37,99,235,var(--tw-bg-opacity))}.btn-info{margin:.5rem;padding-left:1.25rem;padding-right:1.25rem;--tw-text-opacity:1;color:rgba(219,234,254,var(--tw-text-opacity));transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.btn-warn{--tw-bg-opacity:1;background-color:rgba(252,211,77,var(--tw-bg-opacity))}.btn-warn:hover{--tw-bg-opacity:1;background-color:rgba(251,191,36,var(--tw-bg-opacity))}.btn-warn{margin:.5rem;padding-left:1.25rem;padding-right:1.25rem;--tw-text-opacity:1;color:rgba(219,234,254,var(--tw-text-opacity));transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.alert-info{--tw-bg-opacity:1;background-color:rgba(59,130,246,var(--tw-bg-opacity));border-radius:.25rem;border-width:0;margin-bottom:1rem;padding:1rem 1.5rem;position:relative;--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem*(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem*var(--tw-space-y-reverse))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.bg-yellow-300{--tw-bg-opacity:1;background-color:rgba(252,211,77,var(--tw-bg-opacity))}.bg-green-600{--tw-bg-opacity:1;background-color:rgba(5,150,105,var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity:1;background-color:rgba(4,120,87,var(--tw-bg-opacity))}.bg-blue-500{--tw-bg-opacity:1;background-color:rgba(59,130,246,var(--tw-bg-opacity))}.hover\\:bg-yellow-400:hover{--tw-bg-opacity:1;background-color:rgba(251,191,36,var(--tw-bg-opacity))}.hover\\:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgba(4,120,87,var(--tw-bg-opacity))}.hover\\:bg-green-800:hover{--tw-bg-opacity:1;background-color:rgba(6,95,70,var(--tw-bg-opacity))}.hover\\:bg-blue-600:hover{--tw-bg-opacity:1;background-color:rgba(37,99,235,var(--tw-bg-opacity))}.hover\\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgba(29,78,216,var(--tw-bg-opacity))}.border-gray-300{--tw-border-opacity:1;border-color:rgba(209,213,219,var(--tw-border-opacity))}.border-indigo-500{--tw-border-opacity:1;border-color:rgba(99,102,241,var(--tw-border-opacity))}.rounded{border-radius:.25rem}.rounded-md{border-radius:.375rem}.rounded-lg{border-radius:.5rem}.border-0{border-width:0}.border-l-2{border-left-width:2px}.border-t{border-top-width:1px}.cursor-pointer{cursor:pointer}.block{display:block}.inline-block{display:inline-block}.flex{display:flex}.table{display:table}.flex-col{flex-direction:column}.justify-center{justify-content:center}.font-semibold{font-weight:600}.h-6{height:1.5rem}.h-8{height:2rem}.h-10{height:2.5rem}.text-base{font-size:1rem}.leading-6,.text-base{line-height:1.5rem}.leading-normal{line-height:1.5}.list-decimal{list-style-type:decimal}.m-2{margin:.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mt-1{margin-top:.25rem}.mb-4{margin-bottom:1rem}.mr-8{margin-right:2rem}.opacity-0{opacity:0}.opacity-50{opacity:.5}.focus\\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.overflow-hidden{overflow:hidden}.p-5{padding:1.25rem}.p-8{padding:2rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-4{padding-top:1rem;padding-bottom:1rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.pb-2{padding-bottom:.5rem}.pl-2{padding-left:.5rem}.pt-3{padding-top:.75rem}.pl-4{padding-left:1rem}.pt-5{padding-top:1.25rem}.pl-5{padding-left:1.25rem}.pl-10{padding-left:2.5rem}.pr-12{padding-right:3rem}.absolute{position:absolute}.relative{position:relative}.inset-y-0{top:0;bottom:0}.right-0{right:0}*{--tw-shadow:0 0 transparent}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0,0,0,0.05)}.shadow-md,.shadow-sm{box-shadow:var(--tw-ring-offset-shadow,0 0 transparent),var(--tw-ring-shadow,0 0 transparent),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px rgba(0,0,0,0.1),0 2px 4px -1px rgba(0,0,0,0.06)}*{--tw-ring-inset:var(--tw-empty, );--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,0.5);--tw-ring-offset-shadow:0 0 transparent;--tw-ring-shadow:0 0 transparent}.focus\\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 transparent)}.focus\\:ring-blue-400:focus{--tw-ring-opacity:1;--tw-ring-color:rgba(96,165,250,var(--tw-ring-opacity))}.focus\\:ring-opacity-75:focus{--tw-ring-opacity:0.75}.table-auto{table-layout:auto}.text-left{text-align:left}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgba(55,65,81,var(--tw-text-opacity))}.text-red-600{--tw-text-opacity:1;color:rgba(220,38,38,var(--tw-text-opacity))}.text-green-100{--tw-text-opacity:1;color:rgba(209,250,229,var(--tw-text-opacity))}.text-blue-100{--tw-text-opacity:1;color:rgba(219,234,254,var(--tw-text-opacity))}.align-middle{vertical-align:middle}.w-6{width:1.5rem}.w-1\\/3{width:33.333333%}.w-9\\/12{width:75%}.w-full{width:100%}.transition-colors{transition-property:background-color,border-color,color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1)}.duration-150,.transition-colors{transition-duration:.15s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}:host{display:block}@media (min-width:640px){.sm\\:text-sm{font-size:.875rem;line-height:1.25rem}.sm\\:text-lg{font-size:1.125rem}.sm\\:leading-7,.sm\\:text-lg{line-height:1.75rem}}";export{l as teams_component}